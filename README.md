# Drone Interactive Simulator for Advanced robot programming

## Overview
This project is a multi-process interactive simulator designed to operate a drone within a 2D environment.
The system simulates the physical dynamics of a drone (inertia and viscous resistance), allowing the user to navigate through obstacles and reach targets using keyboard controls.

<img width="1640" height="812" alt="image" src="https://github.com/user-attachments/assets/0a97025c-138a-4101-999e-954ce76bcc35" />

The visual interface is built using the `ncurses` library, providing a lightweight, terminal-based simulation.

## System Architecture
The application is designed as a distributed system involving five active concurrent processes communicating via Pipes.

<img width="70%" height="70%" alt="Blackboard" src="https://github.com/user-attachments/assets/067aa08b-654c-4f51-b734-a7c77508b098" />

### Components
The system follows a blackboard architecture:
1.  **Blackboard:** The central server. It maintains the geometrical state of the world (drone position, map, targets, obstacles) and manages communication between processes.
2.  **Drone:** Calculates the physics of the drone, including mass, friction, and external forces, solving the motion equations.
3.  **Input:** Captures keyboard inputs from the user and sends command forces to the server.
4.  **Obstacles:** Spawns obstacles at random locations that repel the drone.
5.  **Targets:** Spawns targets that the drone must collect.

### Files
* **Parameter File:** Contains all the parameters about the physics (forces, mass, viscousity, time of integration), the protocol of communication via pipes.
* **Log Files:** Contains all the debug, warning and error messages.

## Physics & Dynamics
The drone is modeled as a point mass with 2 Degrees of Freedom (DoF). The motion is determined by the following equation of dynamics, solved numerically using Euler's method:

$$\sum F = M \frac{d^2p}{dt^2} + K \frac{dp}{dt}$$

Where:
* $M$ = Mass (Inertia)
* $K$ = Viscous friction coefficient
* $F$ = Sum of all forces applied

### Forces Involved
1.  **Command Forces:** Generated by user keypresses. Forces accumulate in steps to simulate thrust.
2.  **Repulsive Forces:** Generated by obstacles and walls using **Latombe/Khatib’s model**.
   
$$\sum F = \eta * (\frac{1}{d} - \frac{1}{\rho})\frac{1}{d^2}$$

The force increases as the drone gets closer to an obstacle, diverging to infinity as distance approaches zero.

>[!NOTE]
>All computations are performed in floating-point precision; only the visual representation is discrete.

## Installation & Requirements

### Prerequisites
* Linux Environment (POSIX compliant)
* GCC Compiler
```
sudo apt install gcc
```
* `ncurses` library:
```
sudo apt-get install libncurses5-dev libncursesw5-dev
```
* Konsole
```
sudo apt install konsole
```
* Clone the repositery
```
git clone https://github.com/TZTozz/ARP-Assignment.git
cd ARP-Assignment
```

## Usage
### Launch the program
```
./launcher.sh
```
### Control the drone
The drone is controlled via the keyboard. The the following keys increase the force in the specific direction (relative to the key D).
The key D is the brake and halves the force.
```
┌───┬───┬───┐
│ W │ E │ R │
├───┼───┼───┤
│ S │ D │ F │
├───┼───┼───┤
│ X │ C │ V │
└───┴───┴───┘
```
### Visual elements
* ${\color{magenta}"+"}$: the drone
* ${\color{green}"T"}$: targets
* ${\color{red}"0"}$: obstacles

